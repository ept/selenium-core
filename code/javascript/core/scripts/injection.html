<script language="JavaScript" type="text/javascript" src="/selenium-server/jsunit/app/jsUnitCore.js"></script>
<script type="text/javascript" src="/selenium-server/core/scripts/xmlextras.js"></script>
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/scripts/selenium-browserdetect.js"></script>
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/scripts/selenium-browserbot.js"></script>
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/scripts/prototype-1.4.0.js"></script> 
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/scripts/find_matching_child.js"></script> 
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/scripts/selenium-api.js"></script>
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/scripts/selenium-commandhandlers.js"></script>
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/scripts/selenium-executionloop.js"></script>
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/scripts/selenium-seleneserunner.js"></script>
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/scripts/selenium-logging.js"></script>
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/scripts/htmlutils.js"></script>
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/xpath/misc.js"></script>
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/xpath/dom.js"></script>
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/xpath/xpath.js"></script>
<script language="JavaScript" type="text/javascript" src="/selenium-server/core/scripts/user-extensions.js"></script>
<script language="JavaScript">
    

// Some background on the code below: broadly speaking, where we are relative to other windows
// when running in proxy injection mode depends on whether we are in a frame set file or not.
// 
// In regular HTML files, the selenium JavaScript is injected into an iframe called "selenium"
// in order to reduce its impact on the JavaScript environment (through namespace pollution,
// etc.).  So in regular HTML files, we need to look at the parent of the current window when we want
// a handle to, e.g., the application window.
// 
// In frame set files, we can't use an iframe, so we put the JavaScript in the head element and share
// the window with the frame set.  So in this case, we need to look at the current window, not the
// parent when looking for, e.g., the application window.  (TODO: Perhaps I should have just 
// assigned a regular frame for selenium?)
// 
BrowserBot.prototype.getContentWindow = function() {
    if (window["isFrameset"] != null) return window;
    return window.parent;
};

BrowserBot.prototype.getTargetWindow = function(windowName) {
    if (window["isFrameset"] != null) return window;
    return window.parent;
};

BrowserBot.prototype.getCurrentWindow = function() {
    if (window["isFrameset"] != null) return window;
    return window.parent;
};

LOG.openLogWindow = function(message, className) {
	// disable for now
};

function relayToRC(name) {
	var object = eval(name);
        var s = 'state:' + serializeObject(name, object) + "\n";
        sendToRC(s);
        // if we find that messages are being lost, we could send them synchronously (shudder):
        //sendToRC(s, null, null, null, false);
}

BrowserBot.prototype.relayBotToRC = function(name) {
	relayToRC("selenium." + name);
}

function selenium_frameRunTest(oldOnLoadRoutine) {
	if (oldOnLoadRoutine) {
		eval(oldOnLoadRoutine);
	}
        runTest();
}
</script>
